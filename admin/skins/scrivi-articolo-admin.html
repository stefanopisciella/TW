<h3>Scrivi un articolo</h3>

<form method="POST" action="scrivi-articolo-admin.php" style="margin-left: 10%; margin-right: 10%; margin-bottom: 4%; margin-top: 4%;" enctype="multipart/form-data">
    <div class="col-md-6 col-12">
        <h5 style="color: red; margin-bottom: 2%;">
            <[error]>
        </h5>
        <div class="form-group">
            <label for="last-name-column">Categoria</label>
            <select name="categoria" class="form-select" id="basicSelect">
                <option value="">-</option>
                <[categorie_articolo]>
            </select>
        </div>
    </div>
    <div class="row">
        <div>
            <div class="card-body">
                <div class="form-group mb-3">
                    <label for="titolo" class="form-label">Titolo</label>
                    <textarea class="form-control" id="titolo" rows="1" name="titolo"></textarea>
                </div>
            </div>
        </div>
    </div>
    <label class="form-label">Articolo</label>
    <section class="section">
        <div class="row">
            <div class="col-12">
                <div class="card-body">
                    <!-- <div id="editor">
                        <p></p>
                    </div> -->
                    <textarea class="col-12" id="editor" name="testo" value="" placeholder=""></textarea>
                </div>
            </div>
        </div>
    </section>

    <div class="row">
        <div class="col">
            <div class="card-body">
                <div class="form-group mb-3" style="margin-top: 2%;">
                    <label for="titolo" class="form-label">Tags (inserisci i tag separati da virgola)</label>
                    <textarea class="form-control" id="titolo" rows="1" name="tags"></textarea>
                </div>
            </div>
        </div>
    </div>

    <div class="col-xl-12" style="margin-top: 5%; margin-bottom: 5%; margin-left: 25%; margin-right: 25%;">
        <img class="card-img-top img-fluid" id="display-image" src="assets/images/samples/origami.jpg" alt="immagine articolo" style="margin-bottom: 2%; display: block;"/>
        <input type="file" name="image" class="form-control" style="width: 50%;" id="image" accept="image/png, image/jpeg"  aria-describedby="inputGroupFileAddon04" aria-label="Upload">
    </div>

    <button type="submit" class="btn btn-primary me-1 mb-1">Pubblica</button>
</form>

<script src="js/vendor/jquery-3.6.0.min.js"></script>
<script src="https://cdn.ckeditor.com/ckeditor5/34.2.0/classic/ckeditor.js"></script>
<script>
    // implementazione dell'editor di testo per scrivere l'articolo
    ClassicEditor
        .create(document.querySelector('#editor'))
        .catch(error => {
            console.error(error);
        });

    // visualizzazione dell'immagine caricata
    const image_input = document.querySelector("#image");

    image_input.addEventListener("change", function () {
        console.log(image_input.value);
        const reader = new FileReader();
        reader.addEventListener("load", () => {
            const uploaded_image = reader.result;
            // REMOVE
            document.querySelector("#display-image").setAttribute('src', "");
            document.querySelector("#display-image").style.backgroundImage = `url(${uploaded_image})`;
        });

        reader.readAsDataURL(this.files[0]);
    });
</script>

<script>
    $(document).ready(function(){
        $(".ck.ck-button.ck-off.ck-button_with-text.ck-dropdown__button").hide();
        $(".ck.ck-button.ck-off.ck-dropdown__button").hide();
        $(".ck.ck-toolbar__separator").hide();
        for(i=11; i<13; i++)
            $(".ck.ck-toolbar__items :nth-child("+i+")").hide()

    })
</script>

<style>
    #display-image{
        width: 409.5px;
        height: 309.4px;
        border: 0px;
        background-position: center;
        background-size: cover;
    }
</style>
